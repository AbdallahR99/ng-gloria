<img src="images/home-cover.png" alt="" class="img-fluid w-full" />
<div class="container px-3 py-3 mx-auto">
  <section class="mb-20 categories">
    <h3 class="my-8 text-center text-4xl">
      {{"Shop By Category" | translate}}
    </h3>

    <div class="grid grid-cols-4 sm:grid-cols-4 sm:grid-cols-6 lg:grid-cols-8 gap-4 max-w-[1000px] mx-auto">
      @if (categories.isLoading() ) {
      @for (item of [1, 2, 3, 4, 5, 6,7 ,8]; track item) {
      <div class="animate-pulse flex flex-col items-center text-center">
        <div class="avatar card-app">
          <div class="w-20 h-20 md:h-24 md:w-24 bg-gray-300 rounded-full"></div>
        </div>
        <span class="mt-2 text-sm font-medium bg-gray-300 h-4 w-16 rounded"></span>
      </div>
      }
      }
      @for (item of categories.value(); track item.id) {
      @let name = isEn ? item.nameEn : item.nameAr;
      <a [routerLink]="appRoutes.PRODUCTS" [queryParams]="{category: item.slug}"
        class="group flex flex-col items-center text-center ">
        <div class="avatar card-app ">

          <div
            class="w-20 h-20 md:h-24 md:w-24  group-hover:shadow-md shadow-gray-300/50 transition-shadow rounded-full border border-gray-300 bg-gray-100 overflow-hidden">
            <img [src]="item.image  | supabaseImage:'categories'" alt="{{name}}" class="object-contain w-full h-full" />
          </div>
        </div>
        <span class="mt-2 text-sm font-medium group-hover:text-secondary transition-colors">{{name}}</span>
      </a>
      }
    </div>
  </section>
  <section class="mb-8 top-discounts">
    <h3 class="mb-4 font-medium text-3xl">
      {{"Today's Discounts" | translate}}
    </h3>
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
      @if (productsTodayDiscounts.isLoading() ) {
      @for (item of [1, 2, 3, 4, 5]; track item) {
      <div class="animate-pulse">
        <div class="card bg-base-100 shadow-md rounded-lg">
          <div class="aspect-square bg-gray-300 rounded-t-lg"></div>
          <div class="card-body p-4">
            <h4 class="text-sm font-medium mb-2 bg-gray-300 h-6 w-3/4 rounded"></h4>
            <div class="flex items
              justify-between">
              <div class="flex items
                gap-2">
                <span class="bg-gray-300 h-6 w-16 rounded"></span>
                <span class="bg-gray-300 h-6 w-16 rounded"></span>
              </div>
              <span class="bg-gray-300 h-6 w-16 rounded"></span>
            </div>
          </div>
        </div>
      </div>
      }
      }
      @for (item of productsTodayDiscounts.value()?.data; track item.id) {

      <ng-container *ngTemplateOutlet="productCard; context: {$implicit: item}"></ng-container>

      }
    </div>
  </section>

  <section class="mb-8 new-arrivals">
    <h3 class="mb-4 font-medium text-3xl">
      {{"New Arrivals" | translate}}
    </h3>

    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-9 lg:grid-cols-10 gap-4">
      <div
        style="background: linear-gradient(180deg, rgba(255, 255, 255, 0.00) 7.29%, rgba(53, 53, 53, 0.16) 40.73%), url(/images/newProductsSection.jpg) lightgray 50% / cover no-repeat;"
        class="rounded-lg max-md:hidden text-neutral-content col-span-1 sm:col-span-1">
        <div class="card-body flex justify-center items-center h-full text-center">
          <h3 class="text-3xl text-wrap font-medium">{{"New Arrivals" | translate}}</h3>
          <div class="text-end flex justify-end w-full">
            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 74 74" fill="none">
              <path
                d="M47.9998 10C33.6405 10 22 21.6405 22 35.9998C22 50.359 33.6405 62 47.9998 62C62.359 62 74 50.359 74 35.9998C73.9838 21.6471 62.3529 10.0161 47.9998 10ZM47.9998 59.3997C35.0763 59.3997 24.5998 48.9233 24.5998 35.9998C24.5998 23.0763 35.0763 12.5998 47.9998 12.5998C60.9233 12.5998 71.3997 23.0763 71.3997 35.9998C71.3849 48.917 60.917 59.3849 47.9998 59.3997Z"
                fill="currentColor" />
              <path
                d="M44.9555 25.9216C44.4147 25.4487 43.5935 25.504 43.1207 26.0444C42.6485 26.5852 42.7037 27.4064 43.2441 27.8791L52.5256 36L43.2436 44.1214C42.7027 44.5941 42.648 45.4153 43.1203 45.9556C43.593 46.4965 44.4142 46.5517 44.9551 46.0789L55.3549 36.9788C55.4944 36.8567 55.6063 36.7062 55.6829 36.5374C55.7595 36.3686 55.7992 36.1853 55.7992 35.9999C55.7992 35.8145 55.7595 35.6313 55.6829 35.4625C55.6063 35.2936 55.4944 35.1432 55.3549 35.0211L44.9555 25.9216Z"
                fill="currentColor" />
            </svg>
          </div>
        </div>
      </div>
      @if (productsNewArrival.isLoading() ) {
      @for (item of [1, 2, 3, 4]; track item) {
      <div class="animate-pulse md:col-span-2">
        <div class="card bg-base-100 shadow-md rounded-lg">
          <div class="aspect-square bg-gray-300 rounded-t-lg"></div>
          <div class="card-body p-4">
            <h4 class="text-sm font-medium mb-2 bg-gray-300 h-6 w-3/4 rounded"></h4>
            <div class="flex items
              justify-between">
              <div class="flex items
                gap-2">
                <span class="bg-gray-300 h-6 w-16 rounded"></span>
                <span class="bg-gray-300 h-6 w-16 rounded"></span>
              </div>
              <span class="bg-gray-300 h-6 w-16 rounded"></span>
            </div>
          </div>
        </div>
      </div>
      }
      }
      @for (item of productsNewArrival.value()?.data; track item.id) {
      <div class="md:col-span-2"><ng-container
          *ngTemplateOutlet="productCard; context: {$implicit: item}"></ng-container>
      </div>

      }
    </div>
  </section>



</div>
<section class="pb-8 brand-feature bg-neutral-content">
  <div class="py-6">
    <h3 class="text-center text-3xl font-medium">
      {{"Mon Guerialian" | translate}}
    </h3>
  </div>
  <div class="flex max-md:flex-col container mx-auto px-2 max-w-[1000px]">
    <div class="flex-1 m-auto md:max-w-80">
      <div class="flex flex-col max-md:items-center max-md:text-center">
        <span>{{"Perfume" | translate}}</span>
        <h3 class="text-2xl font-medium">
          {{"Ingredient, Ingredient & Ingredient" | translate}}
        </h3>
        <div class="text-xs py-4 text-base-content/70">
          @if (isEn) {
          “Lorem Ipsum is simply dummy text of the printing and typesetting in . Lorem Ipsum has been been the indus
          Lorem Ipsum has been Ipsum been”n the indus Lorem Ipsum has been Ipsum been”n thm
          } @else {“Lorem Ipsum is simply dummy text of the printing and typesetting in . Lorem Ipsum has been been the
          indus Lorem Ipsum has been Ipsum been”n the indus Lorem Ipsum has been Ipsum been”n thm }
        </div>
        <button class="btn btn-primary btn-sm px-9 text-white mt-8">
          {{"View Product" | translate}}
        </button>
      </div>
    </div>
    <div class="flex-1 flex md:justify-end max-md:order-first">
      <img src="images/mon-promo.png" alt="Mon Guerialian" class="md:h-90 max-md:h-60 max-md:mx-auto object-contain" />
    </div>
  </div>
</section>

<section class="app-promo-section">
  <img class="max-md:hidden" src="images/home-promo.png" width="100%" alt="Natural Skin Care Products">
  <img class="md:hidden" src="images/home-promo-mobile.png" width="100%" alt="Natural Skin Care Products">
</section>

<section class="max-md:hidden">
  <img src="images/home-promo" width="w-full" alt="">
</section>
<section class="mb-8 testimonials bg-neutral-content relative">
  <div class="py-6">
    <h3 class="text-center text-3xl font-medium">
      {{"What our Client Says" | translate}}
    </h3>
  </div>

  <div class="container mx-auto pb-20">
    <div class="w-full">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:items-start">
        @for (review of [
        {
        stars: 4,
        text: "Lorem Ipsum is simply dummy text of the printing and typesetting in... Lorem Ipsum has been the
        industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled
        it to make a type specimen book.",
        author: "Mar Ali",
        country: "UAE",
        },
        {
        stars: 4,
        text: "Lorem Ipsum is simply dummy text of the printing and typesetting in... Lorem Ipsum has been the
        industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled
        it to make a type specimen book.",
        author: "Mar Ali",
        country: "UAE"
        },
        {
        stars: 4,
        text: "Lorem Ipsum is simply dummy text of the printing and typesetting in... Lorem Ipsum has been the
        industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled
        it to make a type specimen book.",
        author: "Mar Ali",
        country: "UAE"
        }
        ]; track $index) {
        <div class="card bg-base-100 p-6 shadow-lg relative">
          <div class="flex justify-center mb-2">
            @for (star of [1, 2, 3, 4, 5]; track star) {
            <mat-icon class="fill" [ngClass]="
            {
              'before:text-primary': star <= review.stars,
              'before:text-gray-300': star > review.stars
            }
            " fontIcon="star" />

            }
          </div>
          <p [ngClass]="{
            'text-xs/5.5': $first || $last,
            'max-md:text-xs/5.5 md:text-sm/5.5': !$first && !$last
          }" class=" my-4 text-gray-600  text-center">
            {{isEn ? review.text : review.text}}
          </p>
          <div class="flex justify-center items-center">
            <div class="text-center">
              <span class="text-primary font-medium">{{review.author}}</span><span class="text-gray-500"> -
                {{review.country}}</span>
            </div>
          </div>
          <svg class="text-primary absolute scale-75 -bottom-9 end-3" xmlns="http://www.w3.org/2000/svg" width="68"
            height="61" viewBox="0 0 68 61" fill="none">
            <path
              d="M14.025 36.6763C12.6225 39.8407 10.4125 42.967 7.45875 45.9788C6.52375 46.932 6.39625 48.3045 7.16125 49.372C7.75625 50.2107 8.73375 50.6682 9.79625 50.6682C10.0938 50.6682 10.3913 50.6491 10.6888 50.5538C16.9363 48.9145 31.535 43.1004 31.9387 24.4573C32.0875 17.2707 26.2225 11.0945 18.5938 10.3891C14.365 10.0079 10.1575 11.247 7.03375 13.7632C5.4888 15.0201 4.25398 16.5529 3.40861 18.2633C2.56324 19.9737 2.12601 21.8238 2.125 23.6948C2.125 29.9854 7.0975 35.4945 14.025 36.6763ZM52.5087 10.3891C48.3012 10.0079 44.0938 11.247 40.97 13.7632C39.4249 15.02 38.1901 16.5529 37.3447 18.2633C36.4993 19.9737 36.0621 21.8238 36.0612 23.6948C36.0612 29.9854 41.0337 35.4945 47.9613 36.6763C46.5588 39.8407 44.3487 42.967 41.395 45.9788C40.46 46.932 40.3325 48.3045 41.0975 49.372C41.6925 50.2107 42.67 50.6682 43.7325 50.6682C44.03 50.6682 44.3275 50.6491 44.625 50.5538C50.8725 48.9145 65.4712 43.1004 65.875 24.4573V24.1904C65.875 17.1182 60.0737 11.0945 52.5087 10.3891Z"
              fill="currentColor" />
          </svg>
        </div>
        }
      </div>
    </div>
  </div>
  <svg class="absolute bottom-0 left-0" width="100" height="100" viewBox="0 0 100 100" fill="none"
    xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_12_500)">
      <path
        d="M100 100H96.078C96.0494 74.5273 85.9178 50.1061 67.9058 32.0942C49.8939 14.0822 25.4727 3.95059 0 3.922L0 0C26.5125 0.0299084 51.9305 10.5752 70.6776 29.3224C89.4248 48.0695 99.9701 73.4875 100 100Z"
        fill="#3F4A5D" />
      <path d="M78.184 100H74.3C74.3 60.9002 40.967 29.0822 0 29.0822V25.2002C43.111 25.2002 78.184 58.7532 78.184 100Z"
        fill="#3F4A5D" />
      <path
        d="M51.913 99.9999H47.92C47.906 87.295 42.8528 75.1146 33.8691 66.1308C24.8854 57.1471 12.7049 52.0939 0 52.0799L0 48.0869C13.7634 48.1025 26.9586 53.5769 36.6908 63.3091C46.423 73.0413 51.8974 86.2365 51.913 99.9999Z"
        fill="#3F4A5D" />
      <path
        d="M25.891 99.9999H22.056C22.0494 94.1523 19.7235 88.5461 15.5886 84.4112C11.4538 80.2764 5.84758 77.9505 0 77.9439L0 74.1089C6.86428 74.1168 13.4451 76.8472 18.2989 81.701C23.1527 86.5547 25.8831 93.1356 25.891 99.9999Z"
        fill="#3F4A5D" />
    </g>
    <defs>
      <clipPath id="clip0_12_500">
        <rect width="100" height="100" fill="white" />
      </clipPath>
    </defs>
  </svg>

</section>


<div class="bg-white container mx-auto">
  <section class="mb-8 why-choose-us">
    <h3 class="text-center mb-6 text-3xl font-medium">
      {{"Why Choose Us" | translate}}
    </h3>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
      @for (item of [{
      icon: "w_nature",
      title: "100% Natural",
      description: "High quality products"
      },
      {
      icon: "w_shipped",
      title: "Free shipping",
      description: "On all orders over $50"
      },
      {
      icon: "w_headset",
      title: "24/7 Support",
      description: "Dedicated support"
      },
      {
      icon: "w_box",
      title: "Return policy",
      description: "Easy returns"
      }
      ]; track item.title) {
      <div class="flex max-md:flex-col items-center gap-2 max-md:hidden justify-center">
        <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center relative">
          <mat-icon class="scale-300 absolute top-4 end-8" [svgIcon]="item.icon" />
        </div>
        <div class="md:text-start">
          <h4 class="font-medium ">{{item.title | translate}}</h4>
          <p class="text-sm text-base-content/70">{{item.description | translate}}</p>
        </div>
      </div>
      <div class="md:hidden grid gird-cols-2 px-2">
        <div class="flex max-sm:flex-col items-center gap-2 p-3 border border-primary/80 rounded-md">
          <div>
            <div class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center relative">
              <mat-icon class="sm:scale-150 absolute top-1 sm:end-2" [svgIcon]="item.icon" />
            </div>
          </div>
          <div class="max-sm:text-center sm:text-start">
            <h4 class="font-medium ">{{item.title | translate}}</h4>
            <p class="text-sm text-base-content/70">{{item.description | translate}}</p>
          </div>
        </div>
      </div>
      }


    </div>
  </section>

  <section class="mb-8 get-in-touch max-md:bg-secondary/8 p-3">
    <h3 class="text-center mb-6 text-3xl font-medium">
      {{"Get in Touch" | translate}}
    </h3>
    <div class="flex flex-col md:flex-row gap-6 max-w-[1000px] mx-auto">
      <div class="md:w-1/3">
        <div class="relative h-72">
          <div class="absolute h-full w-full p-4">
            <img src="images/get-in-touch.png" alt="Products" class="max-h-full mx-auto" />
          </div>
        </div>
      </div>
      <div class="md:w-2/3 flex flex-col justify-center">
        <form>
          <div class="grid grid-cols-1  gap-4 mb-4">
            <div>
              <input type="text" placeholder="{{'Your Name'| translate}}"
                class="input border border-primary/20 rounded-none w-full required" />
            </div>
            <div>
              <input type="email" placeholder="{{'Your Email' | translate}}"
                class="input border border-primary/20 rounded-none w-full" />
            </div>
          </div>
          <div class="mb-4">
            <textarea class="textarea border border-primary/20 rounded-none w-full h-24"
              placeholder="{{'Your Message' | translate}}"></textarea>
          </div>
          <div class="flex justify-end">
            <button class="btn btn-primary btn-block lg:btn-wide">{{"Send" | translate | uppercase}}</button>
          </div>
        </form>
      </div>
    </div>
  </section>
</div>


<ng-template #productCard let-item>
  @let name = isEn ? item.nameEn : item.nameAr;
  <a [routerLink]="[appRoutes.PRODUCT_DETAILS, item.slug]">
    <div
      class="__product_card hover:shadow-md h-full shadow-gray-300/50 cursor-pointer transition-shadow rounded-lg relative border border-gray-200 flex flex-col">
      <fav-button class="absolute z-10 right-0 top-0" (click)="$event.stopPropagation();$event.preventDefault()"
        [product]="item" />

      <figure class="aspect-square flex items-center justify-center bg-gray-100 p-1 max-h-[250px]">
        <img [src]="item.thumbnail | supabaseImage:'products'" alt="{{name}}" class="h-full object-contain aspect-square" />
      </figure>
      <div class="__card-body flex-1 flex flex-col p-3">

        <h4 class="text-sm font-medium mb-2 flex-1">{{name}}</h4>
        <div class="flex m-auto">
          @for (star of [1, 2, 3, 4, 5]; track star) {
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" [class.text-yellow-400]="star <= item.stars"
            [class.text-gray-300]="star > item.stars" viewBox="0 0 20 20" fill="currentColor">
            <path
              d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
          </svg>
          }
          <span class="text-xs ml-1">({{item.reviews}})</span>
        </div>
        @if (item.quantity == 0) {
        <div class="flex items-center gap-1 text-error m-auto ">
          <div class="badge badge-error badge-xs h-2 w-2 "></div>
          <div class="text-xs">{{"Out of Stock" | translate}}</div>

        </div>

        } @else {

        <div class="m-auto text-sm flex gap-2 flex-wrap">
          <span class="font-normal">AED {{item.price}}</span>
          <span class="line-through text-gray-400">AED {{item.oldPrice}}</span>
        </div>
        } <cart-button class="mt-2" (click)="$event.stopPropagation(); $event.preventDefault()" [product]="item" />


      </div>
    </div>
  </a>
</ng-template>
